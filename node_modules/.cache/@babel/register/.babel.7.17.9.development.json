{"{\"assumptions\":{},\"sourceRoot\":\"/Users/chenchen/Desktop/project/zoom/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/chenchen/Desktop/project/zoom\",\"filename\":\"/Users/chenchen/Desktop/project/zoom/src/server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/chenchen/Desktop/project/zoom\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"regenerator-transform\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.9:development":{"value":{"code":"\"use strict\";\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _ws = _interopRequireDefault(require(\"ws\"));\n\nvar _http = _interopRequireDefault(require(\"http\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar app = (0, _express[\"default\"])();\napp.set(\"view engine\", \"pug\");\napp.set(\"views\", __dirname + \"/views\");\napp.use(\"/public\", _express[\"default\"][\"static\"](__dirname + \"/public\"));\n\nvar handleListen = function handleListen() {\n  console.log(\"jello!\");\n};\n\napp.get(\"/\", function (req, res) {\n  return res.render(\"home\");\n});\napp.get(\"/*\", function (req, res) {\n  return res.redirect(\"/\");\n}); //app.listen(3000, handleListen);\n\nvar server = _http[\"default\"].createServer(app); //http server\n\n\nvar wss = new _ws[\"default\"].Server({\n  server: server\n}); //websocket server : http 서버 위에 ws서버를 올림\n\nvar sockets = [];\nwss.on(\"connection\", function (socket) {\n  sockets.push(socket);\n  socket[\"nickname\"] = \"Anonymous\";\n  socket.send(\"hello from sever\");\n  socket.on(\"close\", function () {\n    console.log(\"websocket closed from browser\"); //브라우저에서 소켓 연결을 끊음.\n  });\n  socket.on(\"message\", function (message) {\n    console.log(JSON.parse(message));\n    var parsed = JSON.parse(message);\n\n    switch (parsed.type) {\n      case \"message\":\n        sockets.forEach(function (sk) {\n          sk.send(\"\".concat(socket.nickname, \" : \").concat(parsed.payload));\n        });\n        break;\n\n      case \"nickname\":\n        console.log(parsed.payload);\n        socket[\"nickname\"] = parsed.payload;\n        break;\n    }\n  });\n});\nserver.listen(3000, handleListen);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJuYW1lcyI6WyJhcHAiLCJzZXQiLCJfX2Rpcm5hbWUiLCJ1c2UiLCJleHByZXNzIiwiaGFuZGxlTGlzdGVuIiwiY29uc29sZSIsImxvZyIsImdldCIsInJlcSIsInJlcyIsInJlbmRlciIsInJlZGlyZWN0Iiwic2VydmVyIiwiaHR0cCIsImNyZWF0ZVNlcnZlciIsIndzcyIsIldlYlNvY2tldFNlcnZlciIsIlNlcnZlciIsInNvY2tldHMiLCJvbiIsInNvY2tldCIsInB1c2giLCJzZW5kIiwibWVzc2FnZSIsIkpTT04iLCJwYXJzZSIsInBhcnNlZCIsInR5cGUiLCJmb3JFYWNoIiwic2siLCJuaWNrbmFtZSIsInBheWxvYWQiLCJsaXN0ZW4iXSwibWFwcGluZ3MiOiI7O0FBQUE7O0FBQ0E7O0FBQ0E7Ozs7QUFFQSxJQUFNQSxHQUFHLEdBQUcsMEJBQVo7QUFFQUEsR0FBRyxDQUFDQyxHQUFKLENBQVEsYUFBUixFQUF1QixLQUF2QjtBQUNBRCxHQUFHLENBQUNDLEdBQUosQ0FBUSxPQUFSLEVBQWlCQyxTQUFTLEdBQUcsUUFBN0I7QUFDQUYsR0FBRyxDQUFDRyxHQUFKLENBQVEsU0FBUixFQUFtQkMsOEJBQWVGLFNBQVMsR0FBRyxTQUEzQixDQUFuQjs7QUFDQSxJQUFNRyxZQUFZLEdBQUcsU0FBZkEsWUFBZSxHQUFNO0FBQ3pCQyxFQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWSxRQUFaO0FBQ0QsQ0FGRDs7QUFJQVAsR0FBRyxDQUFDUSxHQUFKLENBQVEsR0FBUixFQUFhLFVBQUNDLEdBQUQsRUFBTUMsR0FBTjtBQUFBLFNBQWNBLEdBQUcsQ0FBQ0MsTUFBSixDQUFXLE1BQVgsQ0FBZDtBQUFBLENBQWI7QUFDQVgsR0FBRyxDQUFDUSxHQUFKLENBQVEsSUFBUixFQUFjLFVBQUNDLEdBQUQsRUFBTUMsR0FBTjtBQUFBLFNBQWNBLEdBQUcsQ0FBQ0UsUUFBSixDQUFhLEdBQWIsQ0FBZDtBQUFBLENBQWQsRSxDQUNBOztBQUNBLElBQU1DLE1BQU0sR0FBR0MsaUJBQUtDLFlBQUwsQ0FBa0JmLEdBQWxCLENBQWYsQyxDQUF1Qzs7O0FBQ3ZDLElBQU1nQixHQUFHLEdBQUcsSUFBSUMsZUFBZ0JDLE1BQXBCLENBQTJCO0FBQUVMLEVBQUFBLE1BQU0sRUFBTkE7QUFBRixDQUEzQixDQUFaLEMsQ0FBb0Q7O0FBQ3BELElBQU1NLE9BQU8sR0FBRyxFQUFoQjtBQUNBSCxHQUFHLENBQUNJLEVBQUosQ0FBTyxZQUFQLEVBQXFCLFVBQUNDLE1BQUQsRUFBWTtBQUMvQkYsRUFBQUEsT0FBTyxDQUFDRyxJQUFSLENBQWFELE1BQWI7QUFDQUEsRUFBQUEsTUFBTSxDQUFDLFVBQUQsQ0FBTixHQUFxQixXQUFyQjtBQUNBQSxFQUFBQSxNQUFNLENBQUNFLElBQVAsQ0FBWSxrQkFBWjtBQUNBRixFQUFBQSxNQUFNLENBQUNELEVBQVAsQ0FBVSxPQUFWLEVBQW1CLFlBQU07QUFDdkJkLElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLCtCQUFaLEVBRHVCLENBQ3VCO0FBQy9DLEdBRkQ7QUFHQWMsRUFBQUEsTUFBTSxDQUFDRCxFQUFQLENBQVUsU0FBVixFQUFxQixVQUFDSSxPQUFELEVBQWE7QUFDaENsQixJQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWWtCLElBQUksQ0FBQ0MsS0FBTCxDQUFXRixPQUFYLENBQVo7QUFDQSxRQUFJRyxNQUFNLEdBQUdGLElBQUksQ0FBQ0MsS0FBTCxDQUFXRixPQUFYLENBQWI7O0FBQ0EsWUFBUUcsTUFBTSxDQUFDQyxJQUFmO0FBQ0UsV0FBSyxTQUFMO0FBQ0VULFFBQUFBLE9BQU8sQ0FBQ1UsT0FBUixDQUFnQixVQUFDQyxFQUFELEVBQVE7QUFDdEJBLFVBQUFBLEVBQUUsQ0FBQ1AsSUFBSCxXQUFXRixNQUFNLENBQUNVLFFBQWxCLGdCQUFnQ0osTUFBTSxDQUFDSyxPQUF2QztBQUNELFNBRkQ7QUFHQTs7QUFDRixXQUFLLFVBQUw7QUFDRTFCLFFBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZb0IsTUFBTSxDQUFDSyxPQUFuQjtBQUNBWCxRQUFBQSxNQUFNLENBQUMsVUFBRCxDQUFOLEdBQXFCTSxNQUFNLENBQUNLLE9BQTVCO0FBQ0E7QUFUSjtBQVdELEdBZEQ7QUFlRCxDQXRCRDtBQXdCQW5CLE1BQU0sQ0FBQ29CLE1BQVAsQ0FBYyxJQUFkLEVBQW9CNUIsWUFBcEIiLCJzb3VyY2VSb290IjoiL1VzZXJzL2NoZW5jaGVuL0Rlc2t0b3AvcHJvamVjdC96b29tL3NyYy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyBmcm9tIFwiZXhwcmVzc1wiO1xuaW1wb3J0IFdlYlNvY2tldFNlcnZlciBmcm9tIFwid3NcIjtcbmltcG9ydCBodHRwIGZyb20gXCJodHRwXCI7XG5cbmNvbnN0IGFwcCA9IGV4cHJlc3MoKTtcblxuYXBwLnNldChcInZpZXcgZW5naW5lXCIsIFwicHVnXCIpO1xuYXBwLnNldChcInZpZXdzXCIsIF9fZGlybmFtZSArIFwiL3ZpZXdzXCIpO1xuYXBwLnVzZShcIi9wdWJsaWNcIiwgZXhwcmVzcy5zdGF0aWMoX19kaXJuYW1lICsgXCIvcHVibGljXCIpKTtcbmNvbnN0IGhhbmRsZUxpc3RlbiA9ICgpID0+IHtcbiAgY29uc29sZS5sb2coXCJqZWxsbyFcIik7XG59O1xuXG5hcHAuZ2V0KFwiL1wiLCAocmVxLCByZXMpID0+IHJlcy5yZW5kZXIoXCJob21lXCIpKTtcbmFwcC5nZXQoXCIvKlwiLCAocmVxLCByZXMpID0+IHJlcy5yZWRpcmVjdChcIi9cIikpO1xuLy9hcHAubGlzdGVuKDMwMDAsIGhhbmRsZUxpc3Rlbik7XG5jb25zdCBzZXJ2ZXIgPSBodHRwLmNyZWF0ZVNlcnZlcihhcHApOyAvL2h0dHAgc2VydmVyXG5jb25zdCB3c3MgPSBuZXcgV2ViU29ja2V0U2VydmVyLlNlcnZlcih7IHNlcnZlciB9KTsgLy93ZWJzb2NrZXQgc2VydmVyIDogaHR0cCDshJzrsoQg7JyE7JeQIHdz7ISc67KE66W8IOyYrOumvFxuY29uc3Qgc29ja2V0cyA9IFtdO1xud3NzLm9uKFwiY29ubmVjdGlvblwiLCAoc29ja2V0KSA9PiB7XG4gIHNvY2tldHMucHVzaChzb2NrZXQpO1xuICBzb2NrZXRbXCJuaWNrbmFtZVwiXSA9IFwiQW5vbnltb3VzXCI7XG4gIHNvY2tldC5zZW5kKFwiaGVsbG8gZnJvbSBzZXZlclwiKTtcbiAgc29ja2V0Lm9uKFwiY2xvc2VcIiwgKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKFwid2Vic29ja2V0IGNsb3NlZCBmcm9tIGJyb3dzZXJcIik7IC8v67iM65287Jqw7KCA7JeQ7IScIOyGjOy8kyDsl7DqsrDsnYQg64GK7J2MLlxuICB9KTtcbiAgc29ja2V0Lm9uKFwibWVzc2FnZVwiLCAobWVzc2FnZSkgPT4ge1xuICAgIGNvbnNvbGUubG9nKEpTT04ucGFyc2UobWVzc2FnZSkpO1xuICAgIGxldCBwYXJzZWQgPSBKU09OLnBhcnNlKG1lc3NhZ2UpO1xuICAgIHN3aXRjaCAocGFyc2VkLnR5cGUpIHtcbiAgICAgIGNhc2UgXCJtZXNzYWdlXCI6XG4gICAgICAgIHNvY2tldHMuZm9yRWFjaCgoc2spID0+IHtcbiAgICAgICAgICBzay5zZW5kKGAke3NvY2tldC5uaWNrbmFtZX0gOiAke3BhcnNlZC5wYXlsb2FkfWApO1xuICAgICAgICB9KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwibmlja25hbWVcIjpcbiAgICAgICAgY29uc29sZS5sb2cocGFyc2VkLnBheWxvYWQpO1xuICAgICAgICBzb2NrZXRbXCJuaWNrbmFtZVwiXSA9IHBhcnNlZC5wYXlsb2FkO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH0pO1xufSk7XG5cbnNlcnZlci5saXN0ZW4oMzAwMCwgaGFuZGxlTGlzdGVuKTtcbiJdfQ==","map":{"version":3,"sources":["server.js"],"names":["app","set","__dirname","use","express","handleListen","console","log","get","req","res","render","redirect","server","http","createServer","wss","WebSocketServer","Server","sockets","on","socket","push","send","message","JSON","parse","parsed","type","forEach","sk","nickname","payload","listen"],"mappings":";;AAAA;;AACA;;AACA;;;;AAEA,IAAMA,GAAG,GAAG,0BAAZ;AAEAA,GAAG,CAACC,GAAJ,CAAQ,aAAR,EAAuB,KAAvB;AACAD,GAAG,CAACC,GAAJ,CAAQ,OAAR,EAAiBC,SAAS,GAAG,QAA7B;AACAF,GAAG,CAACG,GAAJ,CAAQ,SAAR,EAAmBC,8BAAeF,SAAS,GAAG,SAA3B,CAAnB;;AACA,IAAMG,YAAY,GAAG,SAAfA,YAAe,GAAM;AACzBC,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACD,CAFD;;AAIAP,GAAG,CAACQ,GAAJ,CAAQ,GAAR,EAAa,UAACC,GAAD,EAAMC,GAAN;AAAA,SAAcA,GAAG,CAACC,MAAJ,CAAW,MAAX,CAAd;AAAA,CAAb;AACAX,GAAG,CAACQ,GAAJ,CAAQ,IAAR,EAAc,UAACC,GAAD,EAAMC,GAAN;AAAA,SAAcA,GAAG,CAACE,QAAJ,CAAa,GAAb,CAAd;AAAA,CAAd,E,CACA;;AACA,IAAMC,MAAM,GAAGC,iBAAKC,YAAL,CAAkBf,GAAlB,CAAf,C,CAAuC;;;AACvC,IAAMgB,GAAG,GAAG,IAAIC,eAAgBC,MAApB,CAA2B;AAAEL,EAAAA,MAAM,EAANA;AAAF,CAA3B,CAAZ,C,CAAoD;;AACpD,IAAMM,OAAO,GAAG,EAAhB;AACAH,GAAG,CAACI,EAAJ,CAAO,YAAP,EAAqB,UAACC,MAAD,EAAY;AAC/BF,EAAAA,OAAO,CAACG,IAAR,CAAaD,MAAb;AACAA,EAAAA,MAAM,CAAC,UAAD,CAAN,GAAqB,WAArB;AACAA,EAAAA,MAAM,CAACE,IAAP,CAAY,kBAAZ;AACAF,EAAAA,MAAM,CAACD,EAAP,CAAU,OAAV,EAAmB,YAAM;AACvBd,IAAAA,OAAO,CAACC,GAAR,CAAY,+BAAZ,EADuB,CACuB;AAC/C,GAFD;AAGAc,EAAAA,MAAM,CAACD,EAAP,CAAU,SAAV,EAAqB,UAACI,OAAD,EAAa;AAChClB,IAAAA,OAAO,CAACC,GAAR,CAAYkB,IAAI,CAACC,KAAL,CAAWF,OAAX,CAAZ;AACA,QAAIG,MAAM,GAAGF,IAAI,CAACC,KAAL,CAAWF,OAAX,CAAb;;AACA,YAAQG,MAAM,CAACC,IAAf;AACE,WAAK,SAAL;AACET,QAAAA,OAAO,CAACU,OAAR,CAAgB,UAACC,EAAD,EAAQ;AACtBA,UAAAA,EAAE,CAACP,IAAH,WAAWF,MAAM,CAACU,QAAlB,gBAAgCJ,MAAM,CAACK,OAAvC;AACD,SAFD;AAGA;;AACF,WAAK,UAAL;AACE1B,QAAAA,OAAO,CAACC,GAAR,CAAYoB,MAAM,CAACK,OAAnB;AACAX,QAAAA,MAAM,CAAC,UAAD,CAAN,GAAqBM,MAAM,CAACK,OAA5B;AACA;AATJ;AAWD,GAdD;AAeD,CAtBD;AAwBAnB,MAAM,CAACoB,MAAP,CAAc,IAAd,EAAoB5B,YAApB","sourceRoot":"/Users/chenchen/Desktop/project/zoom/src/","sourcesContent":["import express from \"express\";\nimport WebSocketServer from \"ws\";\nimport http from \"http\";\n\nconst app = express();\n\napp.set(\"view engine\", \"pug\");\napp.set(\"views\", __dirname + \"/views\");\napp.use(\"/public\", express.static(__dirname + \"/public\"));\nconst handleListen = () => {\n  console.log(\"jello!\");\n};\n\napp.get(\"/\", (req, res) => res.render(\"home\"));\napp.get(\"/*\", (req, res) => res.redirect(\"/\"));\n//app.listen(3000, handleListen);\nconst server = http.createServer(app); //http server\nconst wss = new WebSocketServer.Server({ server }); //websocket server : http 서버 위에 ws서버를 올림\nconst sockets = [];\nwss.on(\"connection\", (socket) => {\n  sockets.push(socket);\n  socket[\"nickname\"] = \"Anonymous\";\n  socket.send(\"hello from sever\");\n  socket.on(\"close\", () => {\n    console.log(\"websocket closed from browser\"); //브라우저에서 소켓 연결을 끊음.\n  });\n  socket.on(\"message\", (message) => {\n    console.log(JSON.parse(message));\n    let parsed = JSON.parse(message);\n    switch (parsed.type) {\n      case \"message\":\n        sockets.forEach((sk) => {\n          sk.send(`${socket.nickname} : ${parsed.payload}`);\n        });\n        break;\n      case \"nickname\":\n        console.log(parsed.payload);\n        socket[\"nickname\"] = parsed.payload;\n        break;\n    }\n  });\n});\n\nserver.listen(3000, handleListen);\n"]}},"mtime":1650984070043}}